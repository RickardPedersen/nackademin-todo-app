(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"2c7e":function(t,e,n){"use strict";var o=n("c973"),r=n.n(o),a=n("bc3a"),i=n.n(a);const s="/api/todoLists",l={headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}};class d{static getTodoListTodos(t,e,n,o,a,d){return r()((function*(){try{const r=yield i.a.get(`${s}/${t}/todos?descending=${e}&skip=${n}&limit=${o}&sortBy=${a}&filter=${d}`,l),c=r.data;return c}catch(r){return console.log(r),r}}))()}static getTodoLists(){return r()((function*(){try{const t=yield i.a.get(""+s,l),e=t.data;return e}catch(t){return console.log(t),t}}))()}static createTodoList(t){return r()((function*(){try{const e=yield i.a.post(""+s,t,l),n=e.data;return n}catch(e){return console.log(e),!1}}))()}static updateTodoList(t,e){return r()((function*(){try{const n=yield i.a.patch(`${s}/${e}`,t,l),o=n.data;return o}catch(n){return console.log(n),!1}}))()}static deleteTodoList(t){return r()((function*(){try{const e=yield i.a.delete(`${s}/${t}`,l),n=e.data;return n}catch(e){return console.log(e),!1}}))()}}e["a"]=d},"446a":function(t,e,n){"use strict";var o=n("c973"),r=n.n(o),a=n("bc3a"),i=n.n(a);const s="/api/users",l={headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}};class d{static countUsers(t){return r()((function*(){try{const e=yield i.a.get(`${s}/count/${t}`,l),n=e.data;return n}catch(e){return console.log(e),e}}))()}static getAllUsers(t,e,n,o,a){return r()((function*(){try{const r=yield i.a.get(`${s}?descending=${t}&skip=${e}&limit=${n}&sortBy=${o}&filter=${a}`,l),d=r.data;return d}catch(r){return console.log(r),r}}))()}static getUser(t){return r()((function*(){try{const e=yield i.a.get(`${s}/${t}`,l),n=e.data;return n}catch(e){return console.log(e),e}}))()}static createUser(t){return r()((function*(){try{const e=yield i.a.post(""+s,t,l),n=e.data;return n}catch(e){return console.log(e),!1}}))()}static editUser(t,e){return r()((function*(){try{const n=yield i.a.patch(`${s}/${e}`,t,l),o=n.data;return o}catch(n){return console.log(n),!1}}))()}static deleteUser(t){return r()((function*(){try{const e=yield i.a.delete(`${s}/${t}`,l),n=e.data;return n}catch(e){return console.log(e),!1}}))()}static addMember(t,e){var n=this;return r()((function*(){try{n.getUser()}catch(t){return console.log(t),!1}}))()}}e["a"]=d},"77a4":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md"},[n("q-table",{attrs:{title:"Todos",data:t.todos,columns:t.columns,"row-key":"_id","binary-state-sort":"",pagination:t.pagination,loading:t.loading,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"top-left",fn:function(){return[n("div",{staticClass:"q-table__title"},[t._v("Todos")]),n("q-form",{on:{submit:t.submitTodo}},[n("q-input",{ref:"addInput",attrs:{debounce:"300",label:"Add new todo","lazy-rules":"ondemand",rules:[t.createRules]},model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}},[n("q-btn",{attrs:{dense:"",flat:"",icon:"add",type:"submit"}})],1)],1),n("q-form",{on:{submit:t.addMember}},[n("q-input",{ref:"addMember",attrs:{debounce:"300",label:"Add member","lazy-rules":"ondemand",rules:[t.createRules]},model:{value:t.newMember,callback:function(e){t.newMember=e},expression:"newMember"}},[n("q-btn",{attrs:{dense:"",flat:"",icon:"add",type:"submit"}})],1)],1)]},proxy:!0},{key:"header",fn:function(e){return[n("q-tr",{attrs:{props:e}},t._l(e.cols,(function(o){return n("q-th",{key:o.name,attrs:{props:e}},[t._v("\n          "+t._s(o.label)+"\n        ")])})),1)]}},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",[n("q-checkbox",{attrs:{color:"gray"},on:{input:function(n){return t.doneTodo(e.row._id,e.row.done)}},model:{value:e.row.done,callback:function(n){t.$set(e.row,"done",n)},expression:"props.row.done"}})],1),n("q-td",{key:"title",attrs:{props:e}},[t._v("\n          "+t._s(e.row.title)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Title",buttons:""},on:{save:function(n){return t.updateTodo(e.row._id,e.row.title)}},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"props.row.title"}},[n("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"props.row.title"}})],1)],1),n("q-td",{key:"createdAt",attrs:{props:e}},[n("div",{staticClass:"text-pre-wrap"},[t._v("\n            "+t._s(new Date(e.row.createdAt).toLocaleTimeString())+"\n          ")])]),n("q-td",{key:"updatedAt",attrs:{props:e}},[t._v("\n          "+t._s(new Date(e.row.updatedAt).toLocaleTimeString())+"\n        ")]),n("q-td",{key:"delete",attrs:{props:e}},[n("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(n){return t.deleteTodo(e.row._id)}}})],1)],1)]}}])})],1)},r=[],a=(n("a434"),n("e6cf"),n("ddb0"),n("c973")),i=n.n(a),s=n("2c7e"),l=n("8fe0"),d=n("446a"),c={data(){return{testar:"asdasdas",newTitle:"",newMember:"",filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0},todos:[],selected:[],columns:[{name:"done",label:"Done",field:"done",align:"left"},{name:"title",required:!0,label:"Title",align:"left",field:t=>t.name,format:t=>""+t,sortable:!0},{name:"createdAt",label:"Created",field:"createdAt",sortable:!0,style:"width: 10px"},{name:"updatedAt",label:"Updated",field:"updatedAt",sortable:!0},{name:"delete",label:"Delete",field:"delete"}]}},methods:{onRequest(t){var e=this;return i()((function*(){const{page:n,rowsPerPage:o,sortBy:r,descending:a}=t.pagination,i=t.filter;e.loading=!0;const s=0===o?e.pagination.rowsNumber:o,l=yield e.fetchFromServer(a,n,s,r,i);e.pagination.rowsNumber=l.count;const d=l.data;e.todos.splice(0,e.todos.length,...d),e.pagination.page=n,e.pagination.rowsPerPage=o,e.pagination.sortBy=r,e.pagination.descending=a,e.loading=!1}))()},fetchFromServer(t,e,n,o,r){var a=this;return i()((function*(){let i=0;return i=(e-1)*n,yield s["a"].getTodoListTodos(a.$route.params.id,t,i,n,o,r)}))()},addMember(){var t=this;return i()((function*(){yield d["a"].addMember(t.newMember),t.newMember="",t.$refs.addMember.blur(),t.$refs.addMember.resetValidation()}))()},deleteTodo(t){var e=this;return i()((function*(){yield l["a"].deleteTodo(t),yield e.onRequest({pagination:e.pagination,filter:e.filter})}))()},updateTodo(t,e){var n=this;return i()((function*(){let o={title:e};return yield l["a"].editTodo(o,t),yield n.onRequest({pagination:n.pagination,filter:n.filter}),!0}))()},doneTodo(t,e){var n=this;return i()((function*(){let o={done:e};yield l["a"].doneTodo(o,t),yield n.onRequest({pagination:n.pagination,filter:n.filter})}))()},submitTodo(){var t=this;return i()((function*(){let e=yield t.createRules(t.newTitle);if(e){let e={title:t.newTitle,listId:t.$route.params.id};console.log(e),yield l["a"].createTodo(e),t.newTitle="",t.$refs.addInput.blur(),t.$refs.addInput.resetValidation(),yield t.onRequest({pagination:t.pagination,filter:t.filter})}}))()},createRules(t){return i()((function*(){return new Promise((e,n)=>{e(!!t||"Please type something")})}))()}},mounted(){this.onRequest({pagination:this.pagination,filter:this.filter})}},u=c,p=n("2877"),f=n("9c40"),g=n("42a1"),y=n("27f9"),m=n("eaac"),b=n("0016"),h=n("0378"),$=n("bd08"),w=n("357e"),T=n("db86"),q=n("8f8e"),v=n("eebe"),k=n.n(v),_=Object(p["a"])(u,o,r,!1,null,null,null);e["default"]=_.exports;k()(_,"components",{QBtn:f["a"],QPopupEdit:g["a"],QInput:y["a"],QTable:m["a"],QIcon:b["a"],QForm:h["a"],QTr:$["a"],QTh:w["a"],QTd:T["a"],QCheckbox:q["a"]})},"8fe0":function(t,e,n){"use strict";var o=n("c973"),r=n.n(o),a=n("bc3a"),i=n.n(a);const s="/api/todos",l="/api/users",d={headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}};class c{static getAllTodos(t,e,n,o,a){return r()((function*(){try{const r=yield i.a.get(`${s}?descending=${t}&skip=${e}&limit=${n}&sortBy=${o}&filter=${a}`,d),l=r.data;return l}catch(r){return console.log(r),r}}))()}static getUsersTodos(t,e,n,o,a,s){return r()((function*(){try{const r=yield i.a.get(`${l}/${t}/todos?descending=${e}&skip=${n}&limit=${o}&sortBy=${a}&filter=${s}`,d),c=r.data;return c}catch(r){return console.log(r),r}}))()}static getDoneTodos(){return r()((function*(){try{const t=yield i.a.get(s+"/get/done",d),e=t.data;return e}catch(t){return console.log(t),t}}))()}static createTodo(t){return r()((function*(){try{const e=yield i.a.post(""+s,t,d),n=e.data;return n}catch(e){return console.log(e),!1}}))()}static editTodo(t,e){return r()((function*(){try{const n=yield i.a.patch(`${s}/${e}`,t,d),o=n.data;return o}catch(n){return console.log(n),!1}}))()}static doneTodo(t,e){return r()((function*(){try{const n=yield i.a.patch(`${s}/${e}`,t,d),o=n.data;return o}catch(n){return console.log(n),!1}}))()}static deleteTodo(t){return r()((function*(){try{const e=yield i.a.delete(`${s}/${t}`,d),n=e.data;return n}catch(e){return console.log(e),!1}}))()}}e["a"]=c}}]);