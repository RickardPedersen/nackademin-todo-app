(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"8fe0":function(t,e,n){"use strict";var o=n("c973"),r=n.n(o),a=n("bc3a"),i=n.n(a),s=n("4360");const l=Object(s["a"])(),d=l.getters.auth.userToken||localStorage.getItem("userToken"),c="/api/todos",u="/api/users",p={headers:{Authorization:"Bearer "+d}};class f{static getAllTodos(t,e,n,o,a){return r()((function*(){try{const r=yield i.a.get(`${c}?descending=${t}&skip=${e}&limit=${n}&sortBy=${o}&filter=${a}`,p),s=r.data;return s}catch(r){return console.error(r),r}}))()}static getUsersTodos(t,e,n,o,a,s){return r()((function*(){try{const r=yield i.a.get(`${u}/${t}/todos?descending=${e}&skip=${n}&limit=${o}&sortBy=${a}&filter=${s}`,p),l=r.data;return l}catch(r){return console.error(r),r}}))()}static getDoneTodos(){return r()((function*(){try{const t=yield i.a.get(c+"/get/done",p),e=t.data;return e}catch(t){return console.error(t),t}}))()}static createTodo(t){return r()((function*(){try{const e=yield i.a.post(""+c,t,p),n=e.data;return n}catch(e){return console.error(e),!1}}))()}static editTodo(t,e){return r()((function*(){try{const n=yield i.a.patch(`${c}/${e}`,t,p),o=n.data;return o}catch(n){return console.error(n),!1}}))()}static doneTodo(t,e){return r()((function*(){try{const n=yield i.a.patch(`${c}/${e}`,t,p),o=n.data;return o}catch(n){return console.error(n),!1}}))()}static deleteTodo(t){return r()((function*(){try{const e=yield i.a.delete(`${c}/${t}`,p),n=e.data;return n}catch(e){return console.error(e),!1}}))()}}e["a"]=f},f551:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md"},[n("q-table",{attrs:{title:"Todos",data:t.todos,columns:t.columns,"row-key":"_id","binary-state-sort":"",pagination:t.pagination,loading:t.loading,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"top-left",fn:function(){return[n("div",{staticClass:"q-table__title"},[t._v("Todos")])]},proxy:!0},{key:"header",fn:function(e){return[n("q-tr",{attrs:{props:e}},t._l(e.cols,(function(o){return n("q-th",{key:o.name,attrs:{props:e}},[t._v("\n          "+t._s(o.label)+"\n        ")])})),1)]}},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",[n("q-checkbox",{attrs:{color:"gray"},on:{input:function(n){return t.doneTodo(e.row._id,e.row.done)}},model:{value:e.row.done,callback:function(n){t.$set(e.row,"done",n)},expression:"props.row.done"}})],1),n("q-td",{key:"title",attrs:{props:e}},[t._v("\n          "+t._s(e.row.title)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Title",buttons:""},on:{save:function(n){return t.updateTodo(e.row._id,e.row.title)}},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"props.row.title"}},[n("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"props.row.title"}})],1)],1),n("q-td",{key:"createdAt",attrs:{props:e}},[n("div",{staticClass:"text-pre-wrap"},[t._v("\n            "+t._s(new Date(e.row.createdAt).toLocaleTimeString())+"\n          ")])]),n("q-td",{key:"updatedAt",attrs:{props:e}},[t._v("\n          "+t._s(new Date(e.row.updatedAt).toLocaleTimeString())+"\n        ")]),n("q-td",{key:"delete",attrs:{props:e}},[n("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(n){return t.deleteTodo(e.row._id)}}})],1)],1)]}}])})],1)},r=[],a=(n("a434"),n("e6cf"),n("ddb0"),n("c973")),i=n.n(a),s=n("8fe0"),l={data(){return{testar:"asdasdas",newTitle:"",filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0},todos:[],selected:[],columns:[{name:"done",label:"Done",field:"done",align:"left"},{name:"title",required:!0,label:"Title",align:"left",field:t=>t.name,format:t=>""+t,sortable:!0},{name:"createdAt",label:"Created",field:"createdAt",sortable:!0,style:"width: 10px"},{name:"updatedAt",label:"Updated",field:"updatedAt",sortable:!0},{name:"delete",label:"Delete",field:"delete"}]}},methods:{onRequest(t){var e=this;return i()((function*(){const{page:n,rowsPerPage:o,sortBy:r,descending:a}=t.pagination,i=t.filter;e.loading=!0;const s=0===o?e.pagination.rowsNumber:o,l=yield e.fetchFromServer(a,n,s,r,i);e.pagination.rowsNumber=l.count;const d=l.data;e.todos.splice(0,e.todos.length,...d),e.pagination.page=n,e.pagination.rowsPerPage=o,e.pagination.sortBy=r,e.pagination.descending=a,e.loading=!1}))()},fetchFromServer(t,e,n,o,r){return i()((function*(){let a=0;return a=(e-1)*n,yield s["a"].getAllTodos(t,a,n,o,r)}))()},deleteTodo(t){var e=this;return i()((function*(){yield s["a"].deleteTodo(t),yield e.onRequest({pagination:e.pagination,filter:e.filter})}))()},updateTodo(t,e){var n=this;return i()((function*(){let o={title:e};return yield s["a"].editTodo(o,t),yield n.onRequest({pagination:n.pagination,filter:n.filter}),!0}))()},doneTodo(t,e){var n=this;return i()((function*(){let o={done:e};yield s["a"].doneTodo(o,t),yield n.onRequest({pagination:n.pagination,filter:n.filter})}))()},submitTodo(){var t=this;return i()((function*(){let e=yield t.createRules(t.newTitle);if(e){let e={title:t.newTitle,listId:"listidhere"};yield s["a"].createTodo(e),t.newTitle="",t.$refs.addInput.blur(),t.$refs.addInput.resetValidation(),yield t.onRequest({pagination:t.pagination,filter:t.filter})}}))()},createRules(t){return i()((function*(){return new Promise((e,n)=>{e(!!t||"Please type something")})}))()}},mounted(){this.onRequest({pagination:this.pagination,filter:this.filter})}},d=l,c=n("2877"),u=n("eaac"),p=n("27f9"),f=n("0016"),g=n("bd08"),y=n("357e"),w=n("db86"),h=n("8f8e"),b=n("42a1"),T=n("9c40"),m=n("eebe"),q=n.n(m),$=Object(c["a"])(d,o,r,!1,null,null,null);e["default"]=$.exports;q()($,"components",{QTable:u["a"],QInput:p["a"],QIcon:f["a"],QTr:g["a"],QTh:y["a"],QTd:w["a"],QCheckbox:h["a"],QPopupEdit:b["a"],QBtn:T["a"]})}}]);