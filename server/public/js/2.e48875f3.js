(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"2c7e":function(e,t,r){"use strict";var n=r("c973"),o=r.n(n),a=r("bc3a"),i=r.n(a),s=r("4360");const c=Object(s["a"])(),l=c.getters.auth.userToken||localStorage.getItem("userToken"),d="/api/todoLists",u={headers:{Authorization:"Bearer "+l}};class p{static addMember(e,t){return o()((function*(){try{const r={addMember:t},n=yield i.a.patch(`${d}/${e}`,r,u);return n.data}catch(r){return console.error(r),!1}}))()}static removeMember(e,t){return o()((function*(){try{const r={removeMember:t},n=yield i.a.patch(`${d}/${e}`,r,u);return n.data}catch(r){return console.error(r),!1}}))()}static getTodoListTodos(e,t,r,n,a,s){return o()((function*(){try{const o=yield i.a.get(`${d}/${e}/todos?descending=${t}&skip=${r}&limit=${n}&sortBy=${a}&filter=${s}`,u),c=o.data;return c}catch(o){return console.error(o),o}}))()}static getTodoLists(){return o()((function*(){try{const e=yield i.a.get(""+d,u),t=e.data;return t}catch(e){return console.error(e),e}}))()}static createTodoList(e){return o()((function*(){try{const t=yield i.a.post(""+d,e,u),r=t.data;return r}catch(t){return console.error(t),!1}}))()}static updateTodoList(e,t){return o()((function*(){try{const r=yield i.a.patch(`${d}/${t}`,e,u),n=r.data;return n}catch(r){return console.error(r),!1}}))()}static deleteTodoList(e){return o()((function*(){try{const t=yield i.a.delete(`${d}/${e}`,u),r=t.data;return r}catch(t){return console.error(t),!1}}))()}}t["a"]=p},"446a":function(e,t,r){"use strict";var n=r("c973"),o=r.n(n),a=r("bc3a"),i=r.n(a),s=r("4360");const c=Object(s["a"])(),l=c.getters.auth.userToken||localStorage.getItem("userToken"),d="/api/users",u={headers:{Authorization:"Bearer "+l}};class p{static countUsers(e){return o()((function*(){try{const t=yield i.a.get(`${d}/count/${e}`,u),r=t.data;return r}catch(t){return console.error(t),t}}))()}static getAllUsers(e,t,r,n,a){return o()((function*(){try{const o=yield i.a.get(`${d}?descending=${e}&skip=${t}&limit=${r}&sortBy=${n}&filter=${a}`,u),s=o.data;return s}catch(o){return console.error(o),o}}))()}static getUser(e){return o()((function*(){try{const t=yield i.a.get(`${d}/${e}`,u),r=t.data;return r}catch(t){return console.error(t),t}}))()}static createUser(e){return o()((function*(){try{const t=yield i.a.post(""+d,e,u),r=t.data;return r}catch(t){return console.error(t),!1}}))()}static editUser(e,t){return o()((function*(){try{const r=yield i.a.patch(`${d}/${t}`,e,u),n=r.data;return n}catch(r){return console.error(r),!1}}))()}static deleteUser(e){return o()((function*(){try{const t=yield i.a.delete(`${d}/${e}`,u),r=t.data;return r}catch(t){return console.error(t),!1}}))()}}t["a"]=p},"77a4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pa-md"},[r("q-table",{attrs:{title:"Todos",data:e.todos,columns:e.columns,"row-key":"_id","binary-state-sort":"",pagination:e.pagination,loading:e.loading,filter:e.filter},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[r("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"top-left",fn:function(){return[r("div",{staticClass:"q-table__title"},[e._v("Todos")]),r("q-form",{on:{submit:e.submitTodo}},[r("q-input",{ref:"addInput",attrs:{debounce:"300",label:"Add new todo","lazy-rules":"ondemand",rules:[e.createRules]},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}},[r("q-btn",{attrs:{dense:"",flat:"",icon:"add",type:"submit"}})],1)],1),r("q-btn-dropdown",{staticClass:"float-right q-mb-sm",staticStyle:{width:"200px"},attrs:{color:"info",icon:"add",label:"Invite member"}},[r("q-input",{staticClass:"bg-white",staticStyle:{width:"200px"},attrs:{label:"Invite to group"},on:{input:function(t){return e.fectchUsersSearch(e.searchUser)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.searchUser,callback:function(t){e.searchUser=t},expression:"searchUser"}}),r("q-list",e._l(e.userList,(function(t,n){return r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:n,attrs:{clickable:""},on:{click:function(r){return e.inviteUser(t._id)}}},[r("q-item-section",[r("q-item-label",[e._v(e._s(t.username))])],1)],1)})),1)],1),r("br"),r("q-btn-dropdown",{staticClass:"float-right",staticStyle:{width:"200px"},attrs:{color:"red",icon:"delete",label:"Remove member"}},[r("q-input",{staticClass:"bg-white",staticStyle:{width:"200px"},attrs:{label:"Remove member"},on:{input:function(t){return e.fectchUsersSearch(e.searchUser)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.searchUser,callback:function(t){e.searchUser=t},expression:"searchUser"}}),r("q-list",e._l(e.userList,(function(t,n){return r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:n,attrs:{clickable:""},on:{click:function(r){return e.removeMember(t._id)}}},[r("q-item-section",[r("q-item-label",[e._v(e._s(t.username))])],1)],1)})),1)],1)]},proxy:!0},{key:"header",fn:function(t){return[r("q-tr",{attrs:{props:t}},e._l(t.cols,(function(n){return r("q-th",{key:n.name,attrs:{props:t}},[e._v("\n          "+e._s(n.label)+"\n        ")])})),1)]}},{key:"body",fn:function(t){return[r("q-tr",{attrs:{props:t}},[r("q-td",[r("q-checkbox",{attrs:{color:"gray"},on:{input:function(r){return e.doneTodo(t.row._id,t.row.done)}},model:{value:t.row.done,callback:function(r){e.$set(t.row,"done",r)},expression:"props.row.done"}})],1),r("q-td",{key:"title",attrs:{props:t}},[e._v("\n          "+e._s(t.row.title)+"\n          "),r("q-popup-edit",{attrs:{title:"Update Title",buttons:""},on:{save:function(r){return e.updateTodo(t.row._id,t.row.title)}},model:{value:t.row.title,callback:function(r){e.$set(t.row,"title",r)},expression:"props.row.title"}},[r("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.title,callback:function(r){e.$set(t.row,"title",r)},expression:"props.row.title"}})],1)],1),r("q-td",{key:"createdAt",attrs:{props:t}},[r("div",{staticClass:"text-pre-wrap"},[e._v("\n            "+e._s(new Date(t.row.createdAt).toLocaleTimeString())+"\n          ")])]),r("q-td",{key:"updatedAt",attrs:{props:t}},[e._v("\n          "+e._s(new Date(t.row.updatedAt).toLocaleTimeString())+"\n        ")]),r("q-td",{key:"delete",attrs:{props:t}},[r("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(r){return e.deleteTodo(t.row._id)}}})],1)],1)]}}])})],1)},o=[],a=(r("a434"),r("e6cf"),r("ddb0"),r("c973")),i=r.n(a),s=r("2c7e"),c=r("8fe0"),l=r("446a"),d={data(){return{userList:[],searchUser:"",testar:"asdasdas",newTitle:"",newMember:"",filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0},todos:[],selected:[],columns:[{name:"done",label:"Done",field:"done",align:"left"},{name:"title",required:!0,label:"Title",align:"left",field:e=>e.name,format:e=>""+e,sortable:!0},{name:"createdAt",label:"Created",field:"createdAt",sortable:!0,style:"width: 10px"},{name:"updatedAt",label:"Updated",field:"updatedAt",sortable:!0},{name:"delete",label:"Delete",field:"delete"}]}},methods:{fectchUsersSearch(e){var t=this;return i()((function*(){const r=yield l["a"].getAllUsers("","","","",e);t.userList=r.data}))()},inviteUser(e){var t=this;return i()((function*(){yield s["a"].addMember(t.$route.params.id,e)}))()},removeMember(e){var t=this;return i()((function*(){yield s["a"].removeMember(t.$route.params.id,e)}))()},onRequest(e){var t=this;return i()((function*(){const{page:r,rowsPerPage:n,sortBy:o,descending:a}=e.pagination,i=e.filter;t.loading=!0;const s=0===n?t.pagination.rowsNumber:n,c=yield t.fetchFromServer(a,r,s,o,i);t.pagination.rowsNumber=c.count;const l=c.data;t.todos.splice(0,t.todos.length,...l),t.pagination.page=r,t.pagination.rowsPerPage=n,t.pagination.sortBy=o,t.pagination.descending=a,t.loading=!1}))()},fetchFromServer(e,t,r,n,o){var a=this;return i()((function*(){let i=0;return i=(t-1)*r,yield s["a"].getTodoListTodos(a.$route.params.id,e,i,r,n,o)}))()},addMember(){var e=this;return i()((function*(){yield l["a"].addMember(e.newMember),e.newMember="",e.$refs.addMember.blur(),e.$refs.addMember.resetValidation()}))()},deleteTodo(e){var t=this;return i()((function*(){yield c["a"].deleteTodo(e),yield t.onRequest({pagination:t.pagination,filter:t.filter})}))()},updateTodo(e,t){var r=this;return i()((function*(){let n={title:t};return yield c["a"].editTodo(n,e),yield r.onRequest({pagination:r.pagination,filter:r.filter}),!0}))()},doneTodo(e,t){var r=this;return i()((function*(){let n={done:t};yield c["a"].doneTodo(n,e),yield r.onRequest({pagination:r.pagination,filter:r.filter})}))()},submitTodo(){var e=this;return i()((function*(){let t=yield e.createRules(e.newTitle);if(t){let t={title:e.newTitle,listId:e.$route.params.id};yield c["a"].createTodo(t),e.newTitle="",e.$refs.addInput.blur(),e.$refs.addInput.resetValidation(),yield e.onRequest({pagination:e.pagination,filter:e.filter})}}))()},createRules(e){return i()((function*(){return new Promise((t,r)=>{t(!!e||"Please type something")})}))()}},mounted(){this.onRequest({pagination:this.pagination,filter:this.filter})}},u=d,p=r("2877"),f=r("eaac"),m=r("27f9"),y=r("0016"),h=r("0378"),b=r("9c40"),g=r("f20b"),$=r("1c1c"),w=r("66e5"),v=r("4074"),T=r("0170"),q=r("bd08"),k=r("357e"),_=r("db86"),U=r("8f8e"),x=r("42a1"),S=r("7f67"),A=r("eebe"),L=r.n(A),M=Object(p["a"])(u,n,o,!1,null,null,null);t["default"]=M.exports;L()(M,"components",{QTable:f["a"],QInput:m["a"],QIcon:y["a"],QForm:h["a"],QBtn:b["a"],QBtnDropdown:g["a"],QList:$["a"],QItem:w["a"],QItemSection:v["a"],QItemLabel:T["a"],QTr:q["a"],QTh:k["a"],QTd:_["a"],QCheckbox:U["a"],QPopupEdit:x["a"]}),L()(M,"directives",{ClosePopup:S["a"]})},"8fe0":function(e,t,r){"use strict";var n=r("c973"),o=r.n(n),a=r("bc3a"),i=r.n(a),s=r("4360");const c=Object(s["a"])(),l=c.getters.auth.userToken||localStorage.getItem("userToken"),d="/api/todos",u="/api/users",p={headers:{Authorization:"Bearer "+l}};class f{static getAllTodos(e,t,r,n,a){return o()((function*(){try{const o=yield i.a.get(`${d}?descending=${e}&skip=${t}&limit=${r}&sortBy=${n}&filter=${a}`,p),s=o.data;return s}catch(o){return console.error(o),o}}))()}static getUsersTodos(e,t,r,n,a,s){return o()((function*(){try{const o=yield i.a.get(`${u}/${e}/todos?descending=${t}&skip=${r}&limit=${n}&sortBy=${a}&filter=${s}`,p),c=o.data;return c}catch(o){return console.error(o),o}}))()}static getDoneTodos(){return o()((function*(){try{const e=yield i.a.get(d+"/get/done",p),t=e.data;return t}catch(e){return console.error(e),e}}))()}static createTodo(e){return o()((function*(){try{const t=yield i.a.post(""+d,e,p),r=t.data;return r}catch(t){return console.error(t),!1}}))()}static editTodo(e,t){return o()((function*(){try{const r=yield i.a.patch(`${d}/${t}`,e,p),n=r.data;return n}catch(r){return console.error(r),!1}}))()}static doneTodo(e,t){return o()((function*(){try{const r=yield i.a.patch(`${d}/${t}`,e,p),n=r.data;return n}catch(r){return console.error(r),!1}}))()}static deleteTodo(e){return o()((function*(){try{const t=yield i.a.delete(`${d}/${e}`,p),r=t.data;return r}catch(t){return console.error(t),!1}}))()}}t["a"]=f}}]);