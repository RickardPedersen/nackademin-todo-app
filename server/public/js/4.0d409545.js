(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"2ff9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pa-md"},[r("h3",[e._v("Username: "+e._s(e.username))]),r("q-btn",{staticClass:"q-ma-sm",staticStyle:{width:"200px"},attrs:{color:"info"}},[e._v("\n    Change Username\n    "),r("q-popup-edit",{attrs:{title:"Change username",buttons:""},on:{save:function(t){return e.changeUsername(e.newUsername)}},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}},[r("q-input",{ref:"newUsername",attrs:{dense:"",autofocus:"",counter:""},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}})],1)],1),r("br"),r("q-btn",{staticClass:"q-ma-sm",staticStyle:{width:"200px"},attrs:{color:"info"}},[e._v("\n    Change password\n    "),r("q-popup-edit",{attrs:{title:"Change password",buttons:""},on:{save:function(t){return e.changePassword(e.newPassword)}},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}},[r("q-input",{ref:"newPassword",attrs:{type:"password",dense:"",autofocus:"",counter:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)],1),r("br"),r("q-btn",{staticClass:"q-ma-sm",staticStyle:{width:"200px"},attrs:{color:"negative"},on:{click:e.deleteAccount}},[e._v("\n    Delete Account\n  ")]),r("h5",[e._v("role: "+e._s(e.role))]),r("h5",[e._v("Created At: "+e._s(e.createdAt))]),r("h5",[e._v("Updated At: "+e._s(e.updatedAt))])],1)},s=[],a=r("c973"),o=r.n(a),c=r("ded3"),u=r.n(c),l=r("2f62"),d=r("446a"),i={name:"Profile",data(){return{username:null,userId:null,createdAt:null,updatedAt:null,role:null,newPassword:"",newUsername:""}},computed:u()({},Object(l["b"])(["auth"])),created(){var e=this;return o()((function*(){e.userId=e.auth.userId,yield e.getUser()}))()},methods:{deleteAccount(){var e=this;return o()((function*(){yield d["a"].deleteUser(e.userId),localStorage.removeItem("userToken"),e.$store.dispatch("logout"),location.reload(!0)}))()},getUser(){var e=this;return o()((function*(){const t=yield d["a"].getUser(e.userId);e.username=t.username,e.createdAt=t.createdAt,e.updatedAt=t.updatedAt,e.role=t.role}))()},changePassword(e){var t=this;return o()((function*(){let r={password:e};yield d["a"].editUser(r,t.userId),yield t.getUser()}))()},changeUsername(e){var t=this;return o()((function*(){let r={username:e};yield d["a"].editUser(r,t.userId),yield t.getUser()}))()}}},p=i,w=r("2877"),m=r("9c40"),h=r("42a1"),f=r("27f9"),U=r("eebe"),g=r.n(U),v=Object(w["a"])(p,n,s,!1,null,null,null);t["default"]=v.exports;g()(v,"components",{QBtn:m["a"],QPopupEdit:h["a"],QInput:f["a"]})},"446a":function(e,t,r){"use strict";var n=r("c973"),s=r.n(n),a=r("bc3a"),o=r.n(a),c=r("4360");const u=Object(c["a"])(),l=u.getters.auth.userToken||localStorage.getItem("userToken"),d="/api/users",i={headers:{Authorization:"Bearer "+l}};class p{static countUsers(e){return s()((function*(){try{const t=yield o.a.get(`${d}/count/${e}`,i),r=t.data;return r}catch(t){return console.error(t),t}}))()}static getAllUsers(e,t,r,n,a){return s()((function*(){try{const s=yield o.a.get(`${d}?descending=${e}&skip=${t}&limit=${r}&sortBy=${n}&filter=${a}`,i),c=s.data;return c}catch(s){return console.error(s),s}}))()}static getUser(e){return s()((function*(){try{const t=yield o.a.get(`${d}/${e}`,i),r=t.data;return r}catch(t){return console.error(t),t}}))()}static createUser(e){return s()((function*(){try{const t=yield o.a.post(""+d,e,i),r=t.data;return r}catch(t){return console.error(t),!1}}))()}static editUser(e,t){return s()((function*(){try{const r=yield o.a.patch(`${d}/${t}`,e,i),n=r.data;return n}catch(r){return console.error(r),!1}}))()}static deleteUser(e){return s()((function*(){try{const t=yield o.a.delete(`${d}/${e}`,i),r=t.data;return r}catch(t){return console.error(t),!1}}))()}}t["a"]=p}}]);