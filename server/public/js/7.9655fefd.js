(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"03a9":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md"},[n("q-table",{attrs:{title:"Todos",data:e.todos,columns:e.columns,"row-key":"_id","binary-state-sort":"",pagination:e.pagination,loading:e.loading,filter:e.filter},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"top-left",fn:function(){return[n("div",{staticClass:"q-table__title"},[e._v("Todos")])]},proxy:!0},{key:"header",fn:function(t){return[n("q-tr",{attrs:{props:t}},e._l(t.cols,(function(o){return n("q-th",{key:o.name,attrs:{props:t}},[e._v(e._s(o.label))])})),1)]}},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",[n("q-checkbox",{attrs:{color:"gray"},on:{input:function(n){return e.doneTodo(t.row._id,t.row.done)}},model:{value:t.row.done,callback:function(n){e.$set(t.row,"done",n)},expression:"props.row.done"}})],1),n("q-td",{key:"title",attrs:{props:t}},[e._v("\n          "+e._s(t.row.title)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Title",buttons:""},on:{save:function(n){return e.updateTodo(t.row._id,t.row.title)}},model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"props.row.title"}},[n("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"props.row.title"}})],1)],1),n("q-td",{key:"createdAt",attrs:{props:t}},[n("div",{staticClass:"text-pre-wrap"},[e._v("\n            "+e._s(new Date(t.row.createdAt).toLocaleTimeString())+"\n          ")])]),n("q-td",{key:"updatedAt",attrs:{props:t}},[e._v(e._s(new Date(t.row.updatedAt).toLocaleTimeString()))]),n("q-td",{key:"delete",attrs:{props:t}},[n("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(n){return e.deleteTodo(t.row._id)}}})],1)],1)]}}])})],1)},r=[],a=(n("a434"),n("e6cf"),n("ddb0"),n("c973")),i=n.n(a),s=n("8fe0"),l={data(){return{newTitle:"",filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0},todos:[],selected:[],columns:[{name:"done",label:"Done",field:"done",align:"left"},{name:"title",required:!0,label:"Title",align:"left",field:e=>e.name,format:e=>""+e,sortable:!0},{name:"createdAt",label:"Created",field:"createdAt",sortable:!0,style:"width: 10px"},{name:"updatedAt",label:"Updated",field:"updatedAt",sortable:!0},{name:"delete",label:"Delete",field:"delete"}]}},methods:{onRequest(e){var t=this;return i()((function*(){const{page:n,rowsPerPage:o,sortBy:r,descending:a}=e.pagination,i=e.filter;t.loading=!0;const s=0===o?t.pagination.rowsNumber:o,l=yield t.fetchFromServer(t.$route.params.id,a,n,s,r,i);t.pagination.rowsNumber=l.count;const d=l.data;t.todos.splice(0,t.todos.length,...d),t.pagination.page=n,t.pagination.rowsPerPage=o,t.pagination.sortBy=r,t.pagination.descending=a,t.loading=!1}))()},fetchFromServer(e,t,n,o,r,a){return i()((function*(){let i=0;return i=(n-1)*o,yield s["a"].getUsersTodos(e,t,i,o,r,a)}))()},deleteTodo(e){var t=this;return i()((function*(){yield s["a"].deleteTodo(e),yield t.onRequest({pagination:t.pagination,filter:t.filter})}))()},updateTodo(e,t){var n=this;return i()((function*(){let o={title:t};return yield s["a"].editTodo(o,e),yield n.onRequest({pagination:n.pagination,filter:n.filter}),!0}))()},doneTodo(e,t){var n=this;return i()((function*(){let o={done:t};yield s["a"].doneTodo(o,e),yield n.onRequest({pagination:n.pagination,filter:n.filter})}))()},submitTodo(){var e=this;return i()((function*(){let t=yield e.createRules(e.newTitle);if(t){let t={title:e.newTitle};yield s["a"].createTodo(t),e.newTitle="",e.$refs.addInput.blur(),e.$refs.addInput.resetValidation(),yield e.onRequest({pagination:e.pagination,filter:e.filter})}}))()},createRules(e){return i()((function*(){return new Promise((t,n)=>{t(!!e||"Please type something")})}))()}},mounted(){this.onRequest({pagination:this.pagination,filter:this.filter})}},d=l,c=n("2877"),u=n("eaac"),p=n("27f9"),f=n("0016"),g=n("bd08"),y=n("357e"),w=n("db86"),b=n("8f8e"),h=n("42a1"),m=n("9c40"),T=n("eebe"),q=n.n(T),$=Object(c["a"])(d,o,r,!1,null,null,null);t["default"]=$.exports;q()($,"components",{QTable:u["a"],QInput:p["a"],QIcon:f["a"],QTr:g["a"],QTh:y["a"],QTd:w["a"],QCheckbox:b["a"],QPopupEdit:h["a"],QBtn:m["a"]})},"8fe0":function(e,t,n){"use strict";var o=n("c973"),r=n.n(o),a=n("bc3a"),i=n.n(a),s=n("4360");const l=Object(s["a"])(),d=l.getters.auth.userToken||localStorage.getItem("userToken"),c="/api/todos",u="/api/users",p={headers:{Authorization:"Bearer "+d}};class f{static getAllTodos(e,t,n,o,a){return r()((function*(){try{const r=yield i.a.get(`${c}?descending=${e}&skip=${t}&limit=${n}&sortBy=${o}&filter=${a}`,p),s=r.data;return s}catch(r){return console.error(r),r}}))()}static getUsersTodos(e,t,n,o,a,s){return r()((function*(){try{const r=yield i.a.get(`${u}/${e}/todos?descending=${t}&skip=${n}&limit=${o}&sortBy=${a}&filter=${s}`,p),l=r.data;return l}catch(r){return console.error(r),r}}))()}static getDoneTodos(){return r()((function*(){try{const e=yield i.a.get(c+"/get/done",p),t=e.data;return t}catch(e){return console.error(e),e}}))()}static createTodo(e){return r()((function*(){try{const t=yield i.a.post(""+c,e,p),n=t.data;return n}catch(t){return console.error(t),!1}}))()}static editTodo(e,t){return r()((function*(){try{const n=yield i.a.patch(`${c}/${t}`,e,p),o=n.data;return o}catch(n){return console.error(n),!1}}))()}static doneTodo(e,t){return r()((function*(){try{const n=yield i.a.patch(`${c}/${t}`,e,p),o=n.data;return o}catch(n){return console.error(n),!1}}))()}static deleteTodo(e){return r()((function*(){try{const t=yield i.a.delete(`${c}/${e}`,p),n=t.data;return n}catch(t){return console.error(t),!1}}))()}}t["a"]=f}}]);